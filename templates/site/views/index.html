{% extends '/layouts/base.html' %}
{% block conteudo %}

<div class="container py-5">

    <div class="row">
        <div class="col-lg-9 col-md-12">
            {% if slides %}
            <div id="carouselExampleCaptions" class="carousel slide carousel-fade " data-bs-ride="carousel">
                <div class="carousel-indicators">
                    {% for slide in slides %}
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="{{loop.index0}}" {% if loop.index0 == 0 %}class="active"{%endif%} aria-current="true" aria-label="Slide 1"></button>
                    {%endfor%}
                </div>
                <div class="carousel-inner ">
                    {% for slide in slides %}

                    <div class="carousel-item {% if loop.index0 == 0 %}active{%endif%}">
                        {% if slide.capa %}
                        <img src="{{ url('uploads/images/thumbs/thumb-'~slide.capa)}}" class="d-block w-100" alt="{{slide.titulo}}" title="{{slide.titulo}}" />
                        {% else %}
                        <img src="{{ url('uploads/images/thumbs/thumb-universal.jpg')}}" alt="{{slide.titulo}}" title="{{slide.titulo}}" class="d-block w-100" />
                        {% endif %}
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">{{slide.titulo}}</h5>
                            <p>{{resumirTexto(slide.texto,50)| raw}}</p>
                        </div>
                    </div>
                    {%endfor%}

                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>

            {% else %}
            <div class="alert alert-warning " role="alert">
                <div>
                    Nenhum slide cadastrado para exibição!
                </div>
            </div>
            {% endif %}

            {% if posts %}
            <div class="row mt-3">
                {% for post in posts %}
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-body">
                            <a href="{{ url('post/'~post.slug)}}" data-bs-toggle="tooltip" title="{{post.titulo}}" >
                                {% if post.capa %}
                                <img src="{{ url('uploads/images/thumbs/thumb-'~post.capa)}}" itemprop="thumbnail" alt="{{post.titulo}}" title="{{post.titulo}}" class="w-100 hover-zoom" />
                                {% else %}
                                <img src="{{ url('uploads/images/thumbs/thumb-universal.jpg')}}" itemprop="thumbnail" alt="{{post.titulo}}" title="{{post.titulo}}" class="w-100" />
                                {% endif %}
                                <h6 class="card-title fw-bold mt-3">{{post.titulo}}</h6>
                                <div class="d-flex justify-content-between py-1 text-muted">
                                    <small class="categories">{{post.categoria.titulo|upper}}</small>
                                    <small class="data">{{post.categoria.created_at|date("d-m-Y")}}</small>
                                </div>
                                <p class="card-text">{{resumirTexto(post.texto,150)| raw}}</p>

                            </a>
                        </div>
                    </div> 
                </div>
                {%endfor %}
            </div>

            {% else %}
            <div class="alert alert-warning " role="alert">
                <div>
                    Nenhum post foi cadastrado para exibição!
                </div>
            </div>
            {% endif %}


            <div class="d-flex justify-content-center">
                {# Paginação com Bootstrap #}
                <nav aria-label="Page navigation example" class="text-center">
                    <ul class="pagination" style="margin-bottom: 0px;">
                        {# Link para a página anterior #}
                        <li class="page-item {% if not tem_pagina_anterior %}disabled{% endif %}">
                            <a class="page-link" href="?pagina=1" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item {% if not tem_pagina_anterior %}disabled{% endif %}">
                            <a class="page-link" href="?pagina={{ pagina_atual - 1 }}" aria-label="Previous">
                                <span aria-hidden="true"><</span>
                            </a>
                        </li>

                        {# Links das páginas #}
                        {% for link in links_paginacao %}
                        <li class="page-item {% if link.ativo %}active{% endif %}">
                            <a class="page-link" href="?pagina={{ link.pagina }}">{{ link.pagina }}</a>
                        </li>
                        {% endfor %}

                        {# Link para a próxima página #}
                        <li class="page-item {% if not tem_proxima_pagina %}disabled{% endif %}">
                            <a class="page-link" href="?pagina={{ pagina_atual + 1 }}" aria-label="Next">
                                <span aria-hidden="true">></span>
                            </a>
                        </li>
                        <li class="page-item {% if not tem_proxima_pagina %}disabled{% endif %}">
                            <a class="page-link" href="?pagina={{ total_paginas }}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                    <small class="text-muted text-center">Mostrando {{ (pagina_atual - 1)*limite }} até {{ pagina_atual * limite }} dos {{ total_paginas }} registos</small>
                </nav>
            </div>
        </div>

        <div class="col-lg-3">
            {% include'sidebar.html'%}
        </div>
    </div>


</div>

{% endblock %}