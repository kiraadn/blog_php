{% extends 'layouts/base.html'%}

{% block corpo %}

<div class="pagetitle">
    <h1>{{title}}</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url('admin/dashboard') }}">Home</a></li>
            <li class="breadcrumb-item ">Categorias</li>
            <li class="breadcrumb-item active">{{title}}</li>
        </ol>
    </nav>
</div>
<!-- End Page Title -->
{{ flash()}}


<section class="section dashboard">
    <div class="row">
        <div class="col-lg-12 for-pc">
            <diV class="row">
                <!-- Sales Card -->
                <div class="col-xxl-4 col-md-4 col-sm-6">
                    <div class="card info-card sales-card">

                        <div class="card-body">

                            <div class="d-flex align-items-center pt-4">
                                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                    <i class="bi bi-bar-chart-line-fill"></i>
                                </div>
                                <div class="ps-3">
                                    <h6>{{total.total}}</h6>
                                    <span class="text-success small pt-1 fw-bold">Total posts</span> <span class="text-muted small pt-2 ps-1">| Hoje</span>

                                </div>
                            </div>
                        </div>

                    </div>
                </div><!-- End Sales Card -->

                <!-- Revenue Card -->
                <div class="col-xxl-4 col-md-4 col-sm-6">
                    <div class="card info-card revenue-card">

                        <div class="card-body">
                            <div class="d-flex align-items-center pt-4">
                                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <div class="ps-3">
                                    <h6>{{total.activo}}</h6>
                                    <span class="text-success small pt-1 fw-bold">Activos</span> <span class="text-muted small pt-2 ps-1"><i class="bi bi-caret-up-fill"></i> {{((total.activo*100)/total.total)|number_format(3,'.',',')}}%</span>

                                </div>
                            </div>
                        </div>

                    </div>
                </div><!-- End Revenue Card -->

                <!-- Customers Card -->
                <div class="col-xxl-4 col-md-4 col-sm-6">

                    <div class="card info-card customers-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center pt-4">
                                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                    <i class="bi bi-dash-circle-fill"></i>
                                </div>
                                <div class="ps-3">
                                    <h6>{{total.inactivo}}</h6>

                                    <span class="text-danger small pt-1 fw-bold">Inactivos</span> <span class="text-muted small pt-2 ps-1"><i class="bi bi-caret-down-fill"></i> {{((total.inactivo*100)/total.total)|number_format(3,'.',',')}}%</span>


                                </div>
                            </div>

                        </div>
                    </div>

                </div><!-- End Customers Card -->
            </diV>
        </div>
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">

                    <div class="py-2 mt-2 border-0 ">
                        <a href="{{ url('admin/posts/create') }}" class="btn btn-primary text-white">Cadastrar</a>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-striped table-hover" id="tabela">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Título</th>
                                    <th scope="col" class="text-start">Categoria</th>
                                    <th scope="col" class="text-center">Visitas</th>
                                    <th scope="col" class="text-center">Status</th>
                                    <th scope="col" class="text-center">Acção</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for post in posts %}
                                <tr>
                                    <th class="fw-bold">{{post.id}}</th>
                                    <td class="fw-bold">{{post.titulo}}</td>
                                    <td class="text-start" style="padding-left: 20px">{{post.categoria.titulo}}</td>
                                    <td class="text-center">{{post.views}}</td>
                                    <td>
                                        {% if post.status == 1 %}
                                        <div class="d-flex justify-content-center ">
                                            <i class="bi bi-record-fill text-success text-center"></i>
                                        </div>
                                        {% else %}
                                        <div class="d-flex justify-content-center">
                                            <i class="bi bi-record-fill text-danger text-center"></i>
                                        </div>
                                        {% endif %}
                                    </td>
                                    <td class="text-center">
                                        <a href="#info{{post.id}}" data-bs-toggle="offcanvas" class="text-secondary"><i data-bs-toggle="tooltip"  title="Status" class="bi bi-menu-button-wide-fill "></i></a>
                                        <a href="{{ url('admin/posts/edit/'~post.id) }}" data-bs-toggle="tooltip" title="Editar" class="text-primary mx-2"><i class="bi bi-pencil-fill"></i></a>
                                        <a href="{{ url('admin/posts/delete/'~post.id) }}" data-bs-toggle="tooltip" title="Remover" class="text-danger"><i class="bi bi-trash-fill"></i></a>
                                    </td>
                                </tr>
                                
                            <div class="offcanvas offcanvas-start" tabindex="-1" id="info{{post.id}}">
                                <div class="offcanvas-header">
                                    <h5 class="offcanvas-title" id="offcanvasExampleLabel">{{post.titulo}}</h5>
                                    <button type="buttton" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                                </div>
                                <div class="offcanvas-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <img class="h-100 w-100" src="{{ url('uploads/images/'~post.capa)}}" alt="Imagem {{post.titulo}}"/>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="pb-3 fw-bold mb-2">Texto</span>
                                            <p>{{post.texto| raw}}</p>
                                        </li>
                                        
                                        <li class="list-group-item">
                                            <strong>
                                                <i class="bi bi-server text-success"></i>
                                                Dados do Cadastro
                                            </strong>
                                            <ul class="list-group list-group-flush">
                                             
                                                <li class="list-group-item" style="font-size: 1rem">
                                                    <i class="bi bi-alarm-fill text-secondary fw-bold" style="font-size: 1.2rem"></i>
                                                    - {{post.created_at|date('H:i:s')}}
                                                </li>
                                                <li class="list-group-item" style="font-size: 1.01rem">
                                                    <i class="bi bi-calendar2-date-fill text-secondary fw-bold" style="font-size: 1.2rem"></i>
                                                    - {{post.created_at|date('d/m/Y')}}
                                                </li>
                                                <li class="list-group-item">
                                                    <i class="bi bi-person-bounding-box text-secondary fw-bold" style="font-size: 1.2rem"></i>
                                                    - <b>{{post.usuario.name}}</b>
                                                </li>
                                            </ul>
                                        
                                        </li>
                                        
                                      
                                       
                                         <li class="list-group-item">
                                            <strong>
                                                <i class="bi bi-pencil-square text-success"></i>
                                                Actualização
                                            </strong>
                                            <ul class="list-group list-group-flush">
                                             
                                                <li class="list-group-item" style="font-size: 1rem">
                                                    <i class="bi bi-alarm text-primary fw-bold" style="font-size: 1.2rem"></i>
                                                    - {{post.updated_at|date('H:i:s')}}
                                                </li>
                                                <li class="list-group-item" style="font-size: 1.01rem">
                                                    <i class="bi bi-calendar2-date text-primary fw-bold" style="font-size: 1.2rem"></i>
                                                    - {{post.updated_at|date('d/m/Y')}}
                                                </li>
                                                <li class="list-group-item">
                                                    <i class="bi bi-person-bounding-box text-primary fw-bold" style="font-size: 1.2rem"></i>
                                                    - <b>{{post.usuarioUpdate.name}}</b>
                                                </li>
                                                
                                            </ul>
                                        
                                        </li>
                                    </ul>

                                </div>
                            </div>
                                
                                {% endfor%}


                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>


    </div>
</section>
{% endblock %}